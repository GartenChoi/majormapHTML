const palette = ['#c23531','#2f4554', '#61a0a8', '#d48265', '#91c7ae','#749f83',  '#ca8622', '#bda29a','#6e7074','#fb685b','#92d1d9', '#ffb293','#477056',  '#ffb653', '#f0d3cb','#434549','#c23531','#2f4554', '#61a0a8', '#d48265', '#91c7ae','#749f83',  '#ca8622', '#bda29a','#6e7074','#fb685b','#92d1d9', '#ffb293','#477056',  '#ffb653', '#f0d3cb','#434549'];
const majormapDefaultChartOption = {
    color:palette,
    toolbox :{show:true, left:'16px', bottom:'16px', itemSize:40, feature:{saveAsImage: {icon: 'image://assets/img/chart/add-image.png', title:'이미지 저장'}}},
    grid:{left : '0%', right: '0%', top : '60%', bottom: '60%', width:'100%',},
    xAxis:{show: false, min : 'dataMin', max : 'dataMax'},
    yAxis:{show: false, min : 'dataMin', max : 'dataMax'},
    animationDuration: 1500,
    animationEasingUpdate: 'quinticInOut',
    series:[{
        type: 'graph',
        data: null,
        links: null,
        categories: null,
        roam: true, focusNodeAdjacency: true, label: {show:true, position:'bottom', color:'auto', fontSize:16},
        left: 'center', top: 'middle',
        layout:'force', force:{repulsion:null, gravity:0.00, edgeLength:200}
    }],
    textStyle:{textShadowColor:'#fff',textShadowBlur:5}
};

const getMajormapChartLegendHtml=function(data){
    return ['<div class="checked btn btn-main-full btn-large" data-cname="all" onclick="showAllLegend($(this))">전체해제</div>'].concat(data.uniq_coll_list.map(function(coll,index){
        return '<div class="checked category" data-cname="'+coll+'" onclick="toggleLegend($(this))"><div style="background-color:'+palette[index]+';"></div>' +coll+ '</div>'
    })).join('');
};
const getMajormapChartOption=function(data){
    let option=majormapDefaultChartOption;
    const nodes = data.dept_list.map(function(dept,idx){return {x: data.Xn[idx], y: data.Yn[idx], id:idx, uid:'5b74fac92458f70e3c0d4450', mid: data.major_ids[idx], name: dept, category:data.uniq_coll_list.indexOf(data.coll_list[idx]), symbolSize: data.node_weight.map(function(x) {return (x) + 15})[idx], draggable : true}});
    const links = data.edges.map(function(nds){return {source:nds[0], target:nds[1], lineStyle: {color: 'rgba(0, 0, 0, 1)',width: 1}}});
    const categories = data.uniq_coll_list.map(function(coll){return {name:coll}});
    option.legend = {data: categories, show: false};
    option.series[0].data=nodes;
    option.series[0].links=links;
    option.series[0].categories=categories;
    option.series[0].force.repulsion=data.dept_list.length*2;
    return option;
};

// @todo 예시데이터
const majormapData={"edges":[[0,47],[0,3],[1,5],[1,4],[1,47],[2,48],[2,3],[3,4],[3,5],[4,5],[4,48],[4,8],[6,52],[6,8],[7,49],[7,8],[8,49],[9,51],[9,52],[9,11],[9,12],[10,68],[10,60],[11,21],[12,52],[13,45],[13,21],[13,63],[14,14],[14,57],[14,72],[15,53],[15,18],[16,54],[16,30],[17,55],[17,39],[17,38],[17,40],[17,41],[17,65],[17,66],[18,56],[18,19],[19,56],[19,50],[20,22],[20,21],[21,22],[21,45],[21,63],[22,37],[23,27],[23,42],[23,29],[23,31],[24,43],[24,26],[24,28],[25,30],[25,26],[25,29],[26,30],[27,32],[28,29],[30,44],[30,54],[31,32],[31,42],[32,62],[32,69],[33,34],[33,35],[34,35],[35,36],[35,37],[36,37],[38,40],[38,39],[40,55],[41,44],[42,43],[46,51],[46,52],[46,58],[48,57],[50,51],[50,71],[51,52],[53,54],[57,72],[58,68],[59,68],[59,65],[59,64],[60,68],[60,63],[61,62],[61,70],[64,67],[65,66],[67,68],[68,71],[69,70]],"Xn":[119.04610451024666,176.66782882920197,127.40998138829912,136.8679606246476,211.95580501968237,174.18557450117729,502.1882075200208,412.3264999006269,410.9832911109993,665.8720218865531,603.9824688004679,751.2663402780418,635.8602821726266,784.9044395863128,76.58921960536082,378.8654602479155,355.7144340156941,94.77190685788594,410.10949170934117,452.9122302818298,791.0518598090283,781.7487093897889,784.2750527333837,770.3261852227708,539.4941287895698,478.15554116202725,453.1511272605936,858.3669207210125,568.474776617735,595.3568325151974,379.55550512232617,811.5348244189963,900.4561442939855,706.5632767891461,720.8446319752428,718.5768981711602,741.7937698772699,754.1259801552583,22.222129868020982,44.73785546846197,5.959389626499256,175.92217989136273,743.5026552386014,635.3304288782278,229.36165054728076,816.5441645498257,589.1174929487502,132.91090025399785,134.04057462118962,416.64594014486767,524.9969523801475,598.0462670969787,594.8161576395484,360.04088869039293,353.5831373462917,0,426.3274459005295,101.85275649082199,565.0774495572763,413.38228787806736,635.0460308515298,1000,974.8408935404109,729.6266057213824,459.1934416925453,255.93301108042522,189.40775486654658,497.0990349294525,549.1811787272295,955.1996660233356,988.7732183757876,545.1758491170442,95.8584103035863],"Yn":[813.7318502699401,809.2681643933769,888.6787297262651,850.3376484371919,855.8903664892958,837.9921001483783,810.4550286911704,865.0740112841239,845.3251527268317,681.1481331010712,575.7945010955923,537.8865308419736,742.5796197252175,467.74126967737476,1000,295.17387504204873,140.29926118911555,502.7061856046926,364.20355340792605,435.0320601211463,356.8587562734342,432.29150199451516,291.9861332740595,20.86755843675037,25.065694932758323,72.46855684086312,62.376950306304224,17.074043177125073,25.539806987709973,38.39694973232748,119.99945851454385,14.567597650411818,20.15807487923677,3.5350834452189286,0,43.69819672454453,101.90258351570772,148.14645620449562,544.4552539513874,556.0699462026047,525.9231201053885,319.43402170964004,16.544658155672366,11.503860343318935,249.81920697851396,455.00872337801104,701.3824512399896,791.9263620250885,918.681780203001,880.2089081424094,543.5697884105408,666.0059701679497,751.0334261672833,233.28007605224522,173.5126437598714,504.08227843973685,396.4623404286378,966.8829673228945,646.6791948316413,583.4665462187227,556.793985734693,29.92607013524496,14.814357060173675,497.1365934680882,598.0346157701846,552.0786602710613,538.2971912597146,603.2509962747789,595.850230529224,43.91399502295435,46.7944017147502,557.0146010212511,994.6372620508398],"major_ids":["5bb2fe7693d68f81e027a6c9","5bb2fe7693d68f81e027a6cb","5bb2fe7693d68f81e027a6cd","5bb2fe7693d68f81e027a6cf","5bb2fe7693d68f81e027a6d1","5bb2fe7793d68f81e027a6d3","5bb2fe7893d68f81e027a6d5","5bb2fe7893d68f81e027a6d7","5bb2fe7993d68f81e027a6d9","5bb2fe7993d68f81e027a6db","5bb2fe7993d68f81e027a6dd","5bb2fe7993d68f81e027a6df","5bb2fe7993d68f81e027a6e1","5bb2fe7993d68f81e027a6e3","5bb2fe7b93d68f81e027a6e7","5bb2fe7c93d68f81e027a6e9","5bb2fe7d93d68f81e027a6eb","5bb2fe7d93d68f81e027a6ed","5bb2fe7e93d68f81e027a6ef","5bb2fe8093d68f81e027a6f2","5bb2fe8093d68f81e027a6f4","5bb2fe8193d68f81e027a6f6","5bb2fe8193d68f81e027a6f8","5bb2fe8193d68f81e027a6fa","5bb2fe8193d68f81e027a6fc","5bb2fe8193d68f81e027a6fe","5bb2fe8293d68f81e027a700","5bb2fe8393d68f81e027a702","5bb2fe8493d68f81e027a704","5bb2fe8493d68f81e027a706","5bb2fe8493d68f81e027a708","5bb2fe8493d68f81e027a70b","5bb2fe8593d68f81e027a70d","5bb2fe8593d68f81e027a711","5bb2fe8593d68f81e027a713","5bb2fe8593d68f81e027a715","5bb2fe8593d68f81e027a717","5bb2fe8593d68f81e027a719","5bb2fe8693d68f81e027a71c","5bb2fe8a93d68f81e027a723","5bb2fe8b93d68f81e027a729","5bb2fe8e93d68f81e027a732","5bb2fe8f93d68f81e027a734","5bb2fe9093d68f81e027a736","5bb2fe9093d68f81e027a738","5bb2fe9193d68f81e027a73b","5bb2fe9393d68f81e027a73d","5bb2fe9493d68f81e027a740","5bb2fe9793d68f81e027a742","5bb2fe9893d68f81e027a744","5bb2fe9993d68f81e027a747","5bb2fe9a93d68f81e027a749","5bb2fe9b93d68f81e027a74b","5bb2fe9d93d68f81e027a74e","5bb2fe9e93d68f81e027a751","5bb2fe9e93d68f81e027a753","5bb2fe9e93d68f81e027a755","5bb2fe9f93d68f81e027a757","5bb2fea193d68f81e027a75b","5bb2fea293d68f81e027a75d","5bb2fea393d68f81e027a760","5bb2fea593d68f81e027a762","5bb2fea693d68f81e027a764","5bb2fea793d68f81e027a767","5bb2fea993d68f81e027a76a","5bb2fea993d68f81e027a76c","5bb2feab93d68f81e027a76e","5bb2fead93d68f81e027a771","5bb2fead93d68f81e027a773","5bb2feae93d68f81e027a775","5bb2feaf93d68f81e027a777","5c35a05241266e648d97befa","5d1f5076c952734e62e1ead9"],"dept_list":["국어국문학과","중어중문학과","영어영문학과","독일언어문화학과","프랑스언어문화학과","러시아언어문화학과","철학과","사학과","고고미술사학과","사회학과","심리학과","행정학과","정치외교학과","경제학과","수학과","물리학과","화학과","생명과학부","천문우주학과","지구환경과학과","경영학부","국제경영학과","경영정보학과","토목공학부","기계공학부","화학공학과","신소재공학과","건축공학과","안전공학과","환경공학과","공업화학과","도시공학과","건축학과","전기공학부","전자공학부","정보통신공학부","컴퓨터공학과","소프트웨어학과","식물자원환경화학부","식품생명ㆍ축산과학부","응용생명공학부","산림학과","지역건설공학과","바이오시스템공학과","목재ㆍ종이과학과","농업경제학과","교육학과","국어교육과","영어교육과","역사교육과","지리교육과","사회교육과","윤리교육과","물리교육과","화학교육과","생물교육과","지구과학교육과","수학교육과","체육교육과","식품영양학과","아동복지학과","의류학과","주거환경학과","소비자학과","수의예과","약학과","제약학과","의예과","간호학과","조형예술학과","디자인학과","자율전공학부(인문ㆍ자연)","정보통계학과"],"coll_list":["인문대학","인문대학","인문대학","인문대학","인문대학","인문대학","인문대학","인문대학","인문대학","사회과학대학","사회과학대학","사회과학대학","사회과학대학","사회과학대학","자연과학대학","자연과학대학","자연과학대학","자연과학대학","자연과학대학","자연과학대학","경영대학","경영대학","경영대학","공과대학","공과대학","공과대학","공과대학","공과대학","공과대학","공과대학","공과대학","공과대학","공과대학","전자정보대학","전자정보대학","전자정보대학","전자정보대학","전자정보대학","농업생명환경대학","농업생명환경대학","농업생명환경대학","농업생명환경대학","농업생명환경대학","농업생명환경대학","농업생명환경대학","농업생명환경대학","사범대학","사범대학","사범대학","사범대학","사범대학","사범대학","사범대학","사범대학","사범대학","사범대학","사범대학","사범대학","사범대학","생활과학대학","생활과학대학","생활과학대학","생활과학대학","생활과학대학","수의과대학","약학대학","약학대학","의과대학","의과대학","융합학과군","융합학과군","단과대구분없음","자연과학대학"],"uniq_coll_list":["경영대학","공과대학","농업생명환경대학","단과대구분없음","사범대학","사회과학대학","생활과학대학","수의과대학","약학대학","융합학과군","의과대학","인문대학","자연과학대학","전자정보대학"],"node_weight":[0.7390734768477636,3.368196165350694,0.43276339723687773,6.362564607967824,8.882925804493178,3.056063862572645,0.2336629286096617,0.8485931178890871,6.763136262460679,5.664476679884452,0.31659057344053443,0.040692319345149566,0,3.05943520125793,3.954792681221915,1.3282067467559975,0.633594658657281,15,4.516788328036061,4.102117548130797,0.2561841600433389,11.8219291419346,3.3419946573899986,6.759696988963523,3.9752192367141572,3.386360738245206,3.458214305994036,0.7450885163082293,0.7387690742777584,3.6487732380449014,9.770441976543657,3.695452048318062,7.879623828809131,1.1644477831967348,1.1644477831967348,7.616436316865325,0.8166898725999788,3.851805375043025,3.1277838226679284,0.2073147905560555,3.1277838226679284,0.546050652979448,3.7487653049121272,0.766980789832391,0.6604362486043133,0.1761121622916905,2.9132932589417613,0.791373672766406,3.4383211216437153,0.8485931178890871,3.4509412695417745,5.578752096713789,8.50118094440294,1.2369181267191105,4.055796525902101,0.2073147905560555,1.0211290974747138,3.840641486388406,0.23026554639821836,3.501565030751141,3.2155919486637643,1.9667264856279092,1.5609268378101713,2.9756776130999785,0.8118510876833247,3.2495190221472945,0.2412925468629693,0.6931443127740876,12.50559905230061,1.56092683781017,1.9667264856279103,0.38253679558006487,0.7875926979259659],"result":true,"university":{"name":"충북대학교"}};
